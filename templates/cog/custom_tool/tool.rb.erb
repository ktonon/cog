$LOAD_PATH << File.join(File.dirname(__FILE__))
require '<%= @tool_name %>/version'
require 'cog'

# Custom cog tool <%= @tool_name %> 
module <%= @tool_module %> 
  
  # Root of the DSL
  # Feel free to rename this to something more appropriate
  def self.widget(generator_name, &block)
    w = Widget.new generator_name
    block.call w
    
    # Activate <%= @tool_name %> while rendering templates
    # so that cog will be able to find <%= @tool_name %> templates
    Cog::Config.instance.activate_tool '<%= @tool_name %>' do
      w.generate
    end
    
    nil
  end

  # Root type of the DSL
  # You'll want to rename this to something more meaningful
  # and probably place it in a separate file.
  class Widget
    
    include Cog::Generator
    
    attr_accessor :context
    
    def initialize(generator_name)
      @generator_name = generator_name
    end
    
    def generate
      stamp '<%= @tool_name %>/<%= @tool_name %>.txt', "generated_#{@generator_name}.txt"
    end
  end
end
