$LOAD_PATH << File.join(File.dirname(__FILE__))
require '<%= @name %>/version'
require 'cog'

# Inject this tools templates onto the cog template lookup path
# Do not remove this line
Cog::Config.instance.tool_templates_path = File.expand_path(File.join(__FILE__, '..', '..', 'cog', 'templates'))

# Set the template which is used to create generators for this tool
# Do not remove this line
Cog::Config.instance.tool_generator_template = '<%= @name %>/generator.rb'

# Custom cog tool <%= @name %> 
module <%= @module_name %> 

  # Root of the DSL
  # Feel free to rename this to something more appropriate
  def self.widget(generator_name, &block)
    w = Widget.new generator_name
    block.call w
    w.generate
    nil
  end

  # Root type of the DSL
  # You'll want to rename this to something more meaningful
  # and probably place it in a separate file.
  class Widget
    
    include Cog::Generator
    
    attr_accessor :context
    
    def initialize(generator_name)
      @generator_name = generator_name
    end
    
    def generate
      stamp '<%= @name %>/<%= @name %>.txt', "generated_#{@generator_name}.txt"
    end
  end
end
