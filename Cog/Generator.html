<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Cog::Generator - cog API Docs</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/cog/generator.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-available">::available</a>
    
    <li><a href="#method-i-copy_if_missing">#copy_if_missing</a>
    
    <li><a href="#method-i-get_template">#get_template</a>
    
    <li><a href="#method-i-stamp">#stamp</a>
    
    <li><a href="#method-i-touch_path">#touch_path</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../API_rdoc.html">API</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Cog.html">Cog</a>
  
    <li><a href="../Cog/Config.html">Cog::Config</a>
  
    <li><a href="../Cog/Config/Cogfile.html">Cog::Config::Cogfile</a>
  
    <li><a href="../Cog/Config/CogfileError.html">Cog::Config::CogfileError</a>
  
    <li><a href="../Cog/Errors.html">Cog::Errors</a>
  
    <li><a href="../Cog/Errors/MissingTemplate.html">Cog::Errors::MissingTemplate</a>
  
    <li><a href="../Cog/Generator.html">Cog::Generator</a>
  
    <li><a href="../Cog/SpecHelpers.html">Cog::SpecHelpers</a>
  
    <li><a href="../Cog/SpecHelpers/Invocation.html">Cog::SpecHelpers::Invocation</a>
  
    <li><a href="../Cog/SpecHelpers/Matchers.html">Cog::SpecHelpers::Matchers</a>
  
    <li><a href="../Cog/SpecHelpers/Matchers/MatchMaker.html">Cog::SpecHelpers::Matchers::MatchMaker</a>
  
    <li><a href="../Cog/SpecHelpers/Runner.html">Cog::SpecHelpers::Runner</a>
  
    <li><a href="../Cog/Tool.html">Cog::Tool</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Cog::Generator</h1>

  <div id="description" class="description">
    
<p>This module defines an interface which can be used by generator objects.
Specifically, it makes it easy to find ERB templates and render them into
generated source code files, using the <a
href="Generator.html#method-i-stamp">stamp</a> method.</p>

<p>For more details on writing generators see <a
href="https://github.com/ktonon/cog#generators">github.com/ktonon/cog#generators</a></p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-copy_if_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_if_missing</span><span
            class="method-args">(src, dest)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Copy a file from <code>src</code> to <code>dest</code>, but only if
<code>dest</code> does not already exist.</p>
          

          
          <div class="method-source-code" id="copy_if_missing-source">
            <pre><span class="ruby-comment"># File lib/cog/generator.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">copy_if_missing</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">dest</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created #{dest}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- copy_if_missing-source -->
          
        </div>

        

        
      </div><!-- copy_if_missing-method -->

    
      <div id="method-i-get_template" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_template</span><span
            class="method-args">(path, opt={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Get the template with the given name.</p>

<h4 id="method-i-get_template-label-Parameters">Parameters</h4>
<ul><li>
<p><code>path</code> - a path to a template file which is relative to one of
the template directories</p>
</li></ul>

<h4 id="method-i-get_template-label-Options">Options</h4>
<ul><li>
<p><code>:absolute</code> - is the <code>path</code> argument absolute?
(default: <code>false</code>)</p>
</li></ul>

<h4 id="method-i-get_template-label-Returns">Returns</h4>

<p>An instance of ERB.</p>
          

          
          <div class="method-source-code" id="get_template-source">
            <pre><span class="ruby-comment"># File lib/cog/generator.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_template</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">opt</span>={})
  <span class="ruby-identifier">path</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'.erb'</span>
  <span class="ruby-identifier">fullpath</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">opt</span>[<span class="ruby-value">:absolute</span>]
    <span class="ruby-identifier">path</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Config</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">template_paths</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-string">''</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">found</span>, <span class="ruby-identifier">prefix</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">path</span>
      <span class="ruby-identifier">found</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">x</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">found</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTemplate</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">fullpath</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">fullpath</span>
  <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">fullpath</span>), <span class="ruby-value">0</span>, <span class="ruby-string">'&gt;'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_template-source -->
          
        </div>

        

        
      </div><!-- get_template-method -->

    
      <div id="method-i-stamp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stamp</span><span
            class="method-args">(template_path, destination, opt={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Stamp a template <code>source</code> onto a <code>destination</code>.</p>

<h4 id="method-i-stamp-label-Arguments">Arguments</h4>
<ul><li>
<p><code>template_path</code> - a path to a template file which is relative to
one of the template directories</p>
</li><li>
<p><code>destination</code> - a path to which the generated file should be
written</p>
</li></ul>

<h4 id="method-i-stamp-label-Options">Options</h4>
<ul><li>
<p><code>:absolute_template_path</code> - is the <code>template_path</code>
argument absolute? (default: <code>false</code>)</p>
</li></ul>
          

          
          <div class="method-source-code" id="stamp-source">
            <pre><span class="ruby-comment"># File lib/cog/generator.rb, line 53</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stamp</span>(<span class="ruby-identifier">template_path</span>, <span class="ruby-identifier">destination</span>, <span class="ruby-identifier">opt</span>={})
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">get_template</span> <span class="ruby-identifier">template_path</span>, <span class="ruby-value">:absolute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">opt</span>[<span class="ruby-value">:absolute_template_path</span>]
  <span class="ruby-identifier">b</span> = <span class="ruby-identifier">opt</span>[<span class="ruby-value">:binding</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">binding</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkpath</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">destination</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">destination</span>
  <span class="ruby-identifier">scratch</span> = <span class="ruby-node">&quot;#{destination}.scratch&quot;</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">scratch</span>, <span class="ruby-string">'w'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">result</span>(<span class="ruby-identifier">b</span>)}
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">same?</span> <span class="ruby-identifier">destination</span>, <span class="ruby-identifier">scratch</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-identifier">scratch</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Generated #{destination}&quot;</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-identifier">scratch</span>, <span class="ruby-identifier">destination</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- stamp-source -->
          
        </div>

        

        
      </div><!-- stamp-method -->

    
      <div id="method-i-touch_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">touch_path</span><span
            class="method-args">(*path_components)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Recursively create directories in the given path if they are missing.</p>
          

          
          <div class="method-source-code" id="touch_path-source">
            <pre><span class="ruby-comment"># File lib/cog/generator.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">touch_path</span>(*<span class="ruby-identifier">path_components</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">path_components</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">path</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">path</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created #{path}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- touch_path-source -->
          
        </div>

        

        
      </div><!-- touch_path-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-available" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A list of available project generators</p>
          

          
          <div class="method-source-code" id="available-source">
            <pre><span class="ruby-comment"># File lib/cog/generator.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">available</span>
  [<span class="ruby-value">:dummy1</span>, <span class="ruby-value">:dummy2</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- available-source -->
          
        </div>

        

        
      </div><!-- available-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

