<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Cog::Generator
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Cog.html" title="Cog (module)">Cog</a></span></span>
     &raquo; 
    <span class="title">Generator</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Cog::Generator
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1"><span class='object_link'><a href="" title="Cog::Generator (module)">Generator</a></span></dd>
      
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Generator/FileMethods.html" title="Cog::Generator::FileMethods (module)">FileMethods</a></span>, <span class='object_link'><a href="Generator/Filters.html" title="Cog::Generator::Filters (module)">Filters</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html" title="Cog::Generator::LanguageMethods (module)">LanguageMethods</a></span></dd>
      
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="" title="Cog::Generator (module)">Generator</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/cog/generator.rb<span class="defines">,<br />
  lib/cog/generator/filters.rb,<br /> lib/cog/generator/file_methods.rb,<br /> lib/cog/generator/language_methods.rb,<br /> lib/cog/generator/language_methods/scope.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This module defines an interface which can be used by generator objects.
Specifically, it makes it easy to find ERB templates and render them into
generated source code files, using the <span class='object_link'><a href="#stamp-instance_method" title="Cog::Generator#stamp (method)">#stamp</a></span> method.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/ktonon/cog#generators" target="_parent" title="Introduction to Generators">Introduction to Generators</a></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Generator/FileMethods.html" title="Cog::Generator::FileMethods (module)">FileMethods</a></span>, <span class='object_link'><a href="Generator/Filters.html" title="Cog::Generator::Filters (module)">Filters</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html" title="Cog::Generator::LanguageMethods (module)">LanguageMethods</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#embed-instance_method" title="#embed (instance method)">- (nil) <strong>embed</strong>(hook) {|context| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provide a value for embeds with the given hook.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stamp-instance_method" title="#stamp (instance method)">- (nil or String) <strong>stamp</strong>(template_path, destination = nil, opt = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Stamp a template into a file or return it as a string.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Generator/LanguageMethods.html" title="Cog::Generator::LanguageMethods (module)">LanguageMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Generator/LanguageMethods.html#end_all_scopes-instance_method" title="Cog::Generator::LanguageMethods#end_all_scopes (method)">#end_all_scopes</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#include_guard_begin-instance_method" title="Cog::Generator::LanguageMethods#include_guard_begin (method)">#include_guard_begin</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#named_scope_begin-instance_method" title="Cog::Generator::LanguageMethods#named_scope_begin (method)">#named_scope_begin</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#scope_begin-instance_method" title="Cog::Generator::LanguageMethods#scope_begin (method)">#scope_begin</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#scope_end-instance_method" title="Cog::Generator::LanguageMethods#scope_end (method)">#scope_end</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#use_named_scope-instance_method" title="Cog::Generator::LanguageMethods#use_named_scope (method)">#use_named_scope</a></span>, <span class='object_link'><a href="Generator/LanguageMethods.html#warning-instance_method" title="Cog::Generator::LanguageMethods#warning (method)">#warning</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Generator/Filters.html" title="Cog::Generator::Filters (module)">Filters</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Generator/Filters.html#comment-instance_method" title="Cog::Generator::Filters#comment (method)">#comment</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Generator/FileMethods.html" title="Cog::Generator::FileMethods (module)">FileMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Generator/FileMethods.html#copy_file_if_missing-instance_method" title="Cog::Generator::FileMethods#copy_file_if_missing (method)">#copy_file_if_missing</a></span>, <span class='object_link'><a href="Generator/FileMethods.html#files_are_same%3F-instance_method" title="Cog::Generator::FileMethods#files_are_same? (method)">#files_are_same?</a></span>, <span class='object_link'><a href="Generator/FileMethods.html#get_template-instance_method" title="Cog::Generator::FileMethods#get_template (method)">#get_template</a></span>, <span class='object_link'><a href="Generator/FileMethods.html#touch_directory-instance_method" title="Cog::Generator::FileMethods#touch_directory (method)">#touch_directory</a></span>, <span class='object_link'><a href="Generator/FileMethods.html#touch_file-instance_method" title="Cog::Generator::FileMethods#touch_file (method)">#touch_file</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="embed-instance_method">
  
    - (<tt>nil</tt>) <strong>embed</strong>(hook) {|context| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provide a value for embeds with the given hook</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hook</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>hook name used in the embed statements</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt>Embeds::EmbedContext</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>provides information about the environment in which the embed statement was
found</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>The value which will be used to expand the embed (or replace the embedded
content)</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cog/generator.rb', line 71</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_embed identifier id'>embed</span><span class='lparen token'>(</span><span class='rubyid_hook identifier id'>hook</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_eaten identifier id'>eaten</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='comment val'># keep track of eaten statements so that the index can be adjusted</span>
  <span class='rubyid_Embeds constant id'>Embeds</span><span class='dot token'>.</span><span class='rubyid_find identifier id'>find</span><span class='lparen token'>(</span><span class='rubyid_hook identifier id'>hook</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_c identifier id'>c</span><span class='bitor op'>|</span>
    <span class='rubyid_c identifier id'>c</span><span class='dot token'>.</span><span class='rubyid_eaten identifier id'>eaten</span> <span class='assign token'>=</span> <span class='rubyid_eaten identifier id'>eaten</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_Embeds constant id'>Embeds</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span> <span class='rubyid_c identifier id'>c</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span>
      <span class='rubyid_eaten identifier id'>eaten</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_c identifier id'>c</span><span class='dot token'>.</span><span class='rubyid_once? fid id'>once?</span>
      <span class='rubyid_STDOUT constant id'>STDOUT</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span> <span class='dstring node'>&quot;Updated #{c.path.relative_to_project_root} - #{(c.index + 1).ordinalize} occurrence of embed '#{c.hook}'\n&quot;</span><span class='dot token'>.</span><span class='rubyid_color identifier id'>color</span> <span class='symbol val'>:white</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stamp-instance_method">
  
    - (<tt>nil or <span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>stamp</strong>(template_path, destination = nil, opt = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Stamp a template into a file or return it as a string</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_path</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to template file relative one of the <span class='object_link'><a href="Config.html#template_paths-instance_method" title="Cog::Config#template_paths (method)">Config#template_paths</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>destination</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>path to which the generated file should be written, relative to the
<span class='object_link'><a href="Config/ProjectMethods.html#project_source_path-instance_method" title="Cog::Config::ProjectMethods#project_source_path (method)">Config::ProjectMethods#project_source_path</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>opt</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>opt</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:absolute_template_path</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>is the <code>template_path</code> absolute?</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:absolute_destination</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>is the <code>destination</code> absolute?</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:binding</span>
          <span class="type">(<tt>Binding</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>an optional binding to use while evaluating the template</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:filter</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt>Array&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>name(s) of <span class='object_link'><a href="Generator/Filters.html" title="Cog::Generator::Filters (module)">Filters</a></span></p>
</div>
          
        </li>
      
        <li>
          <span class="name">:quiet</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>suppress writing to STDOUT?</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil or <span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if <code>destination</code> is not provided, the stamped template is
returned as a string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cog/generator.rb', line 44</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stamp identifier id'>stamp</span><span class='lparen token'>(</span><span class='rubyid_template_path identifier id'>template_path</span><span class='comma token'>,</span> <span class='rubyid_destination identifier id'>destination</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_opt identifier id'>opt</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='comment val'># Ignore destination if its a hash, its meant to be opt</span>
  <span class='rubyid_opt identifier id'>opt</span><span class='comma token'>,</span> <span class='rubyid_destination identifier id'>destination</span> <span class='assign token'>=</span> <span class='rubyid_destination identifier id'>destination</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_destination identifier id'>destination</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span> <span class='rubyid_Hash constant id'>Hash</span>
  
  <span class='comment val'># Render and filter</span>
  <span class='rubyid_r identifier id'>r</span> <span class='assign token'>=</span> <span class='rubyid_find_and_render identifier id'>find_and_render</span> <span class='rubyid_template_path identifier id'>template_path</span><span class='comma token'>,</span> <span class='rubyid_opt identifier id'>opt</span>
  <span class='rubyid_r identifier id'>r</span> <span class='assign token'>=</span> <span class='rubyid_filter_through identifier id'>filter_through</span> <span class='rubyid_r identifier id'>r</span><span class='comma token'>,</span> <span class='rubyid_opt identifier id'>opt</span><span class='lbrack token'>[</span><span class='symbol val'>:filter</span><span class='rbrack token'>]</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_r identifier id'>r</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_destination identifier id'>destination</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>

  <span class='comment val'># Place it in a file</span>
  <span class='rubyid_write_scratch_file identifier id'>write_scratch_file</span><span class='lparen token'>(</span><span class='rubyid_destination identifier id'>destination</span><span class='comma token'>,</span> <span class='rubyid_r identifier id'>r</span><span class='comma token'>,</span> <span class='rubyid_opt identifier id'>opt</span><span class='lbrack token'>[</span><span class='symbol val'>:absolute_destination</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_path identifier id'>path</span><span class='comma token'>,</span> <span class='rubyid_scratch identifier id'>scratch</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_files_are_same? fid id'>files_are_same?</span> <span class='rubyid_path identifier id'>path</span><span class='comma token'>,</span> <span class='rubyid_scratch identifier id'>scratch</span>
      <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm identifier id'>rm</span> <span class='rubyid_scratch identifier id'>scratch</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_updated identifier id'>updated</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span> <span class='rubyid_path identifier id'>path</span>
      <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_mv identifier id'>mv</span> <span class='rubyid_scratch identifier id'>scratch</span><span class='comma token'>,</span> <span class='rubyid_path identifier id'>path</span>
      <span class='rubyid_STDOUT constant id'>STDOUT</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span> <span class='dstring node'>&quot;#{updated ? :Updated : :Created} #{path.relative_to_project_root}\n&quot;</span><span class='dot token'>.</span><span class='rubyid_color identifier id'>color</span><span class='lparen token'>(</span><span class='rubyid_updated identifier id'>updated</span> <span class='integer val'>? </span><span class='symbol val'>:white</span> <span class='colon op'>:</span> <span class='symbol val'>:green</span><span class='rparen token'>)</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_opt identifier id'>opt</span><span class='lbrack token'>[</span><span class='symbol val'>:quiet</span><span class='rbrack token'>]</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_nil nil kw'>nil</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Dec 15 16:49:31 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.8.7).
</div>

  </body>
</html>